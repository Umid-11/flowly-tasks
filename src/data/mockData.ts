import { Task, User, Notification, ChatRoom, ChatMessage, DashboardStats } from '@/types';

export const mockUsers: User[] = [
  {
    id: '1',
    name: 'Admin User',
    email: 'admin@example.com',
    role: 'admin',
    department: 'Management',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=admin',
    createdAt: new Date('2024-01-01'),
  },
  {
    id: '2',
    name: 'Sarah Manager',
    email: 'manager@example.com',
    role: 'manager',
    department: 'Engineering',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=sarah',
    createdAt: new Date('2024-01-15'),
  },
  {
    id: '3',
    name: 'John Employee',
    email: 'employee@example.com',
    role: 'employee',
    department: 'Engineering',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=john',
    createdAt: new Date('2024-02-01'),
  },
  {
    id: '4',
    name: 'Emily Developer',
    email: 'emily@example.com',
    role: 'employee',
    department: 'Engineering',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=emily',
    createdAt: new Date('2024-02-10'),
  },
  {
    id: '5',
    name: 'Mike Designer',
    email: 'mike@example.com',
    role: 'employee',
    department: 'Design',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=mike',
    createdAt: new Date('2024-02-15'),
  },
];

export const mockTasks: Task[] = [
  {
    id: '1',
    title: 'Design new landing page',
    description: 'Create a modern, responsive landing page design for the new product launch. Include hero section, features, testimonials, and CTA.',
    status: 'in-progress',
    priority: 'high',
    assigneeId: '5',
    assignee: mockUsers[4],
    creatorId: '2',
    creator: mockUsers[1],
    deadline: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000),
    createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000),
    updatedAt: new Date(),
    comments: [
      {
        id: 'c1',
        taskId: '1',
        userId: '2',
        user: mockUsers[1],
        content: 'Please focus on mobile-first design approach.',
        createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),
      },
    ],
  },
  {
    id: '2',
    title: 'Implement user authentication',
    description: 'Set up JWT-based authentication with login, register, and password reset functionality.',
    status: 'review',
    priority: 'urgent',
    assigneeId: '3',
    assignee: mockUsers[2],
    creatorId: '2',
    creator: mockUsers[1],
    deadline: new Date(Date.now() + 1 * 24 * 60 * 60 * 1000),
    createdAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000),
    updatedAt: new Date(),
    comments: [],
  },
  {
    id: '3',
    title: 'API documentation',
    description: 'Write comprehensive API documentation using OpenAPI/Swagger specification.',
    status: 'new',
    priority: 'medium',
    assigneeId: '4',
    assignee: mockUsers[3],
    creatorId: '1',
    creator: mockUsers[0],
    deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),
    createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),
    updatedAt: new Date(),
    comments: [],
  },
  {
    id: '4',
    title: 'Database optimization',
    description: 'Optimize slow queries and add proper indexing to the database.',
    status: 'done',
    priority: 'high',
    assigneeId: '3',
    assignee: mockUsers[2],
    creatorId: '2',
    creator: mockUsers[1],
    deadline: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000),
    createdAt: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000),
    updatedAt: new Date(),
    comments: [],
  },
  {
    id: '5',
    title: 'Setup CI/CD pipeline',
    description: 'Configure GitHub Actions for automated testing and deployment.',
    status: 'in-progress',
    priority: 'medium',
    assigneeId: '4',
    assignee: mockUsers[3],
    creatorId: '1',
    creator: mockUsers[0],
    deadline: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000),
    createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000),
    updatedAt: new Date(),
    comments: [],
  },
  {
    id: '6',
    title: 'Security audit',
    description: 'Perform a comprehensive security audit of the application.',
    status: 'new',
    priority: 'urgent',
    assigneeId: undefined,
    creatorId: '1',
    creator: mockUsers[0],
    deadline: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000),
    createdAt: new Date(),
    updatedAt: new Date(),
    comments: [],
  },
];

export const mockNotifications: Notification[] = [
  {
    id: 'n1',
    userId: '3',
    type: 'task_assigned',
    title: 'New Task Assigned',
    message: 'You have been assigned to "Implement user authentication"',
    isRead: false,
    link: '/tasks/2',
    createdAt: new Date(Date.now() - 1 * 60 * 60 * 1000),
  },
  {
    id: 'n2',
    userId: '3',
    type: 'comment',
    title: 'New Comment',
    message: 'Sarah Manager commented on "Design new landing page"',
    isRead: false,
    link: '/tasks/1',
    createdAt: new Date(Date.now() - 3 * 60 * 60 * 1000),
  },
  {
    id: 'n3',
    userId: '3',
    type: 'deadline',
    title: 'Deadline Approaching',
    message: 'Task "Implement user authentication" is due tomorrow',
    isRead: true,
    link: '/tasks/2',
    createdAt: new Date(Date.now() - 12 * 60 * 60 * 1000),
  },
  {
    id: 'n4',
    userId: '3',
    type: 'chat_message',
    title: 'New Message',
    message: 'You have a new message in "Engineering Team" chat',
    isRead: false,
    link: '/chat/1',
    createdAt: new Date(Date.now() - 30 * 60 * 1000),
  },
];

export const mockChatRooms: ChatRoom[] = [
  {
    id: '1',
    name: 'Engineering Team',
    type: 'team',
    participants: [
      { id: 'p1', roomId: '1', userId: '2', role: 'admin', joinedAt: new Date() },
      { id: 'p2', roomId: '1', userId: '3', role: 'member', joinedAt: new Date() },
      { id: 'p3', roomId: '1', userId: '4', role: 'member', joinedAt: new Date() },
    ],
    createdAt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),
  },
  {
    id: '2',
    name: 'Design Team',
    type: 'team',
    participants: [
      { id: 'p4', roomId: '2', userId: '2', role: 'admin', joinedAt: new Date() },
      { id: 'p5', roomId: '2', userId: '5', role: 'member', joinedAt: new Date() },
    ],
    createdAt: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000),
  },
  {
    id: '3',
    name: 'Project Alpha',
    type: 'project',
    participants: [
      { id: 'p6', roomId: '3', userId: '1', role: 'admin', joinedAt: new Date() },
      { id: 'p7', roomId: '3', userId: '2', role: 'member', joinedAt: new Date() },
      { id: 'p8', roomId: '3', userId: '3', role: 'member', joinedAt: new Date() },
    ],
    createdAt: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000),
  },
];

export const mockChatMessages: ChatMessage[] = [
  {
    id: 'm1',
    roomId: '1',
    senderId: '2',
    sender: mockUsers[1],
    content: 'Hey team! Let\'s discuss the sprint goals for this week.',
    readBy: ['2', '3'],
    createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000),
  },
  {
    id: 'm2',
    roomId: '1',
    senderId: '3',
    sender: mockUsers[2],
    content: 'Sounds good! I can share my progress on the authentication module.',
    readBy: ['2', '3'],
    createdAt: new Date(Date.now() - 1.5 * 60 * 60 * 1000),
  },
  {
    id: 'm3',
    roomId: '1',
    senderId: '4',
    sender: mockUsers[3],
    content: 'I\'ll have the CI/CD pipeline ready by Wednesday.',
    readBy: ['2', '3', '4'],
    createdAt: new Date(Date.now() - 1 * 60 * 60 * 1000),
  },
  {
    id: 'm4',
    roomId: '1',
    senderId: '2',
    sender: mockUsers[1],
    content: 'Perfect! Let\'s sync up tomorrow morning at 10 AM.',
    readBy: ['2'],
    createdAt: new Date(Date.now() - 30 * 60 * 1000),
  },
];

export const getDashboardStats = (userId: string, role: string): DashboardStats => {
  const userTasks = role === 'admin' 
    ? mockTasks 
    : role === 'manager'
    ? mockTasks.filter(t => ['3', '4', '5'].includes(t.assigneeId || ''))
    : mockTasks.filter(t => t.assigneeId === userId);

  return {
    totalTasks: userTasks.length,
    completedTasks: userTasks.filter(t => t.status === 'done').length,
    overdueTasks: userTasks.filter(t => t.deadline && new Date(t.deadline) < new Date() && t.status !== 'done').length,
    inProgressTasks: userTasks.filter(t => t.status === 'in-progress').length,
    unreadMessages: 3,
    unreadNotifications: mockNotifications.filter(n => !n.isRead && n.userId === userId).length,
  };
};
